<Ui xmlns="http://www.blizzard.com/wow/ui/">
	<Script file="customrules.lua"/>

	<Button name="Vendor_CustomRule_CommandButton" virtual="true">
		<Size x="20" y="20"/>
		<Scripts>
			<OnLoad>self.texture:SetAlpha(0.5)</OnLoad>
			<OnEnter>
				if (self:IsEnabled()) then
					self.texture:SetAlpha(1.0);
					if (self.tooltip) then
						GameTooltip:SetOwner(self, "ANCHOR_RIGHT");
						GameTooltip:SetText(self.tooltip);
						GameTooltip:Show();
					end
				end
			</OnEnter>
			<OnLeave>
				if (self:IsEnabled()) then
					self.texture:SetAlpha(0.5);
					if (GameTooltip:GetOwner() == self) then
						GameTooltip:Hide();
					end
				end
			</OnLeave>
			<OnMouseDown>
				if (self:IsEnabled()) then
					self.texture:SetPoint("TOPLEFT", 1, -1);
				end
			</OnMouseDown>
			<OnMouseUp>
				if (self:IsEnabled()) then
					self.texture:SetPoint("TOPLEFT", 0, 0);
				end
			</OnMouseUp>
		</Scripts>
	</Button>

	<Button name="Vendor_CustomRule_Template" virtual="true">
		<Size x="400" y="64"/>
		<Layers>
			<Layer level="BORDER">
				<Texture ParentKey="divider">
					<Size x="1" y="1"/>
					<Color r="0.6" g="0.6" b="0.6" a="0.3"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="4" />
						<Anchor point="BOTTOMRIGHT" x="-4" />
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY" textureSubLevel="-1">
				<Texture parentKey="highlight" file="Interface\FriendsFrame\UI-FriendsFrame-HighlightBar-Blue" alpha="0.4" alphaMode="ADD" hidden="true">
					<TexCoords left="0.2" right="0.8" top="0" bottom="1"/>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture parentKey="selected" file="Interface\FriendsFrame\UI-FriendsFrame-HighlightBar" alpha="0.4" alphaMode="ADD" hidden="true">
					<TexCoords left="0.2" right="0.8" top="0" bottom="1"/>
				</Texture>
			</Layer>
			<Layer level="BACKGROUND">>
				<!-- debug only show the author -->
				<FontString parentKey="author" inherits="GameFontDisableTiny" justifyH="LEFT" justifyV="BOTTOM">
					<Size x="1" y="8"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="16" y="2"/>
						<Anchor point="BOTTOMRIGHT" x="-16" y="2"/>
					</Anchors>>
				</FontString>
                <Texture parentKey="sellRule" file="Interface\ICONS\INV_Misc_Coin_17" alpha="0.75" hidden="true">
                    <Size x="24" y="24"/>
                    <Anchors>
                        <Anchor point="TOPLEFT" x="4" y="-6"/>
                    </Anchors>
                </Texture>
                <Texture parentKey="keepRule" file="Interface\ICONS\INV_Shield_09" alpha="0.75" hidden="true">
                    <Size x="54" y="54"/>
                    <Anchors>
                        <Anchor point="TOPLEFT" relativeKey="$parent.sellRule"/>
                        <Anchor point="BOTTOMRIGHT" relativeKey="$parent.sellRule"/>
                    </Anchors>
                </Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString parentKey="name" inherits="GameFontHighlightLarge" justifyH="LEFT" text="Rule Name">
					<Anchors>
						<Anchor point="TOPLEFT"  x="34" y="-4"/>
						<Anchor point="TOPRIGHT" x="-12" y="-24"/>
					</Anchors>
				</FontString>
				<FontString parentKey="text" inherits="GameFontNormalSmall" justifyH="LEFT" justifyV="TOP" wordwrap="true">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.name" relativePoint="BOTTOMLEFT" y="-2" x="0"/>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="-12" y="4"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="deleteButton" inherits="Vendor_CustomRule_CommandButton" visible="false">
				<KeyValues>
					<KeyValue key="tooltip" value="DELETE" type="global"/>
				</KeyValues>
				<Anchors>
					<Anchor point="BOTTOMRIGHT" x="-12" y="4"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<Texture file="Interface\COMMON\VOICECHAT-MUTED" alpha="0.5" parentKey="texture"/>
					</Layer>
				</Layers>
				<Scripts>
					<OnClick>self:GetParent():DeleteRule();</OnClick>
				</Scripts>
			</Button>
			<Button parentKey="editButton" inherits="Vendor_CustomRule_CommandButton" visible="false">
				<KeyValues>
					<KeyValue key="tooltip" value="EDIT" type="global"/>
				</KeyValues>
				<Anchors>
					<Anchor point="BOTTOMRIGHT" relativeKey="$parent.deleteButton" relativePoint="BOTTOMLEFT" x="-2" y="0"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<Texture file="Interface\WorldMap\GEAR_64GREY" alpha="0.5" parentKey="texture"/>
					</Layer>
				</Layers>
				<Scripts>
					<OnClick>self:GetParent():EditRule();</OnClick>
				</Scripts>
			</Button>
			<Button parentKey="shareButton" inherits="Vendor_CustomRule_CommandButton" visible="false">
				<Anchors>
					<Anchor point="BOTTOMRIGHT" relativeKey="$parent.editButton" relativePoint="BOTTOMLEFT" x="-2" y="0"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<Texture file="Interface\WorldMap\ChatBubble_64Grey" alpha="0.5" parentKey="texture"/>
					</Layer>
				</Layers>
				<Scripts>
					<OnClick>self:GetParent():ShareRule(self:GetParent());</OnClick>
				</Scripts>
			</Button>
		</Frames>
		<Scripts>
            <OnLoad>self.shareButton:Hide()</OnLoad>
			<OnEnter>
				self.shareButton:Hide();
				self.editButton:Show();
				self.deleteButton:Show();
			</OnEnter>
			<OnLeave>
				if (not self:IsMouseOver()) then
					self.shareButton:Hide();
					self.editButton:Hide();
					self.deleteButton:Hide();
				end
			</OnLeave>
			<OnDoubleClick>self:EditRule();</OnDoubleClick>
		</Scripts>
		<HighlightTexture file="Interface\PVPFrame\PvPMegaQueue" alphaMode="ADD">
			<Anchors>
				<Anchor point="TOPLEFT" x="12" y="0"/>
				<Anchor point="BOTTOMRIGHT" x="-12" y="0"/>
			</Anchors>
			<TexCoords left="0.00195313" right="0.63867188" top="0.70703125" bottom="0.76757813"/>
		</HighlightTexture>
	</Button>

	<ScrollFrame name="Vendor_CustomRule_List" virtual="true" inherits="FauxScrollFrameTemplate">
        <KeyValues>
            <KeyValue key="itemHeight" value="64" type="number"/>
        </KeyValues>
		<Layers>
			<Layer level="BORDER" textureSubLevel="-2">
				<Texture parentKey="scrollbarBackground">
					<Color r="0" g="0" b="0" a="0.65"/>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString inherits="GameFontHighlight" justifyV="TOP" justifyH="CENTER" parentKey="emptyText" text="There are no custom rules defined">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="-8"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="8"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>Vendor.CustomRuleList.OnLoad(self);</OnLoad>
			<OnShow>self:OnShow();</OnShow>
			<OnVerticalScroll>self:OnVerticalScroll(offset);</OnVerticalScroll>
		</Scripts>
	</ScrollFrame>

</Ui>

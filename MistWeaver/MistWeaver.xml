<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">
    <Frame name="MwUnitFrameTemplate" virtual="true">
        <Size>
            <AbsDimension x="125" y="50"/>
        </Size>
    </Frame>
    
    <Frame name="MwUnitArtFrameTemplate" frameStrata="LOW" virtual="true">
        <Size>
            <AbsDimension x="125" y="50"/>
        </Size>
        <Layers>
            <Layer level="OVERLAY">
                <Texture name="$parentAggro" parentKey="aggro" file="Interface\RaidFrame\Raid-FrameHighlights" hidden="true">
                    <Size>
                        <AbsDimension x="10" y="10"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                        <Anchor point="BOTTOMRIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentHover" parentKey="hover" file="Interface\Addons\MistWeaver\images\unithover" hidden="true">
                    <Size>
                        <AbsDimension x="10" y="10"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                        <Anchor point="BOTTOMRIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentHighlight" parentKey="highlight" file="Interface\Addons\MistWeaver\images\unithighlight" hidden="true">
                    <Size>
                        <AbsDimension x="10" y="10"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                        <Anchor point="BOTTOMRIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentRoleIcon" parentKey="roleIcon" file="Interface\LFGFrame\UI-LFG-ICON-PORTRAITROLES" hidden="true">
                    <Size>
                        <AbsDimension x="12" y="12"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="2" y="-2"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentRaidIcon" parentKey="raidIcon" file="Interface\targetingframe\ui-raidtargetingicons" hidden="true">
                    <Size>
                        <AbsDimension x="12" y="12"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="2" y="-14"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentDisconnected" parentKey="dc" file="Interface\CharacterFrame\Disconnect-Icon" hidden="true">
                    <Size>
                        <AbsDimension x="50" y="50"/>
                    </Size>
                    <Anchors>
                        <Anchor point="CENTER">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentDebuff1" parentKey="debuff1" file="Interface\Icons\Ability_Creature_Cursed_02" hidden="true">
                    <Size>
                        <AbsDimension x="15" y="15"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPRIGHT">
                            <Offset>
                                <AbsDimension x="-5" y="-5"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <TexCoords left="0.1" right="0.9" top="0.1" bottom="0.9" />
                </Texture>
                <Texture name="$parentDebuff1Border" parentKey="debuff1border" file="Interface\Addons\MistWeaver\images\debuffborder" hidden="true">
                    <Size>
                        <AbsDimension x="32" y="32"/>
                    </Size>
                    <Anchors>
                        <Anchor point="CENTER" relativeTo="$parentDebuff1" relativePoint="CENTER">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentDebuff2" parentKey="debuff2" file="Interface\Icons\Ability_Creature_Cursed_02" hidden="true">
                    <Size>
                        <AbsDimension x="15" y="15"/>
                    </Size>
                    <Anchors>
                        <Anchor point="RIGHT" relativeTo="$parentDebuff1" relativePoint="LEFT">
                            <Offset>
                                <AbsDimension x="-6" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <TexCoords left="0.1" right="0.9" top="0.1" bottom="0.9" />
                </Texture>
                <Texture name="$parentDebuff2Border" parentKey="debuff2border" file="Interface\Addons\MistWeaver\images\debuffborder" hidden="true">
                    <Size>
                        <AbsDimension x="32" y="32"/>
                    </Size>
                    <Anchors>
                        <Anchor point="CENTER" relativeTo="$parentDebuff2" relativePoint="CENTER">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentDebuff3" parentKey="debuff3" file="Interface\Icons\Ability_Creature_Cursed_02" hidden="true">
                    <Size>
                        <AbsDimension x="15" y="15"/>
                    </Size>
                    <Anchors>
                        <Anchor point="RIGHT" relativeTo="$parentDebuff2" relativePoint="LEFT">
                            <Offset>
                                <AbsDimension x="-6" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <TexCoords left="0.1" right="0.9" top="0.1" bottom="0.9" />
                </Texture>
                <Texture name="$parentDebuff3Border" parentKey="debuff3border" file="Interface\Addons\MistWeaver\images\debuffborder" hidden="true">
                    <Size>
                        <AbsDimension x="32" y="32"/>
                    </Size>
                    <Anchors>
                        <Anchor point="CENTER" relativeTo="$parentDebuff3" relativePoint="CENTER">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </Texture>
                <FontString name="$parentInfo" parentKey="info" hidden="false" inherits="NumberFontNormalHuge" justifyH="CENTER" text="">
                    <Anchors>
                        <Anchor point="CENTER">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>
    </Frame>

    <StatusBar name="MwTextStatusBarTemplate" virtual="true">
        <Size>
            <AbsDimension x="125" y="50"/>
        </Size>
        <Layers>
            <Layer>
                <FontString name="$parentText" parentKey="text" hidden="false" inherits="GameFontHighlightSmall" text="">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                        <Anchor point="BOTTOMRIGHT">
                            <Offset>
                                <AbsDimension x="0" y="0"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>
        <Scripts>
            <OnLoad>
                self:SetMinMaxValues(0, 100);
                self:SetValue(0);
            </OnLoad>
        </Scripts>
        <BarTexture file="Interface\TargetingFrame\UI-StatusBar"/>
        <BarColor r="0" g="1.0" b="0"/>
    </StatusBar>
    
    <Frame name="MistWeaverButtonFrameTemplate" parent="UIParent" virtual="true">
        <Frames>
		    <Button name="$parentButton" parentKey="button" frameStrata="HIGH" inherits="SecureActionButtonTemplate, ActionButtonTemplate" toplevel="true">
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="TOPLEFT">
                        <Offset>
                            <AbsDimension x="0" y="0"/>
                        </Offset>
                    </Anchor>
                    <Anchor point="BOTTOMRIGHT" relativeTo="$parent" relativePoint="BOTTOMRIGHT">
                        <Offset>
                            <AbsDimension x="0" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors> 
			    <Frames>
			        <Cooldown name="$parentCooldown" inherits="CooldownFrameTemplate" frameStrata="HIGH">
			        </Cooldown>
			    </Frames>
			    <Layers>	    
		            <Layer level="ARTWORK">
		                <Texture name="$parentIcon" parentKey="icon">
		                    <Anchors>
		                        <Anchor point="TOPLEFT">
		                            <Offset>
		                                <AbsDimension x="4" y="-4"/>
		                            </Offset>
		                        </Anchor>
		                        <Anchor point="BOTTOMRIGHT">
		                            <Offset>
		                                <AbsDimension x="-4" y="4"/>
		                            </Offset>
		                        </Anchor>
		                    </Anchors>
		                </Texture>
                    </Layer>
                    <Layer level="OVERLAY">
		                <FontString  name="$parentCount" parentKey="count" inherits="NumberFontNormal" frameStrata="TOOLTIP" text="">
		                    <Anchors>
		                        <Anchor point="BOTTOMRIGHT">
		                            <Offset>
		                                <AbsDimension x="-2" y="3"/>
		                            </Offset>
		                        </Anchor>
		                    </Anchors>
		                </FontString>
                    </Layer>
		        </Layers>
		        <Scripts>
		            <OnLoad>
		                self:RegisterEvent("ACTIONBAR_UPDATE_COOLDOWN");
                        self:SetNormalTexture(nil);
                        self:SetHighlightTexture("Interface\\Addons\\MistWeaver\\images\\highlight");
                        self:SetPushedTexture("Interface\\Addons\\MistWeaver\\images\\overlay");
                        self:GetPushedTexture():SetVertexColor(1.0, 1.0, 0.6);
                        
                        local cooldown = _G[self:GetName().."Cooldown"];   
                        cooldown:ClearAllPoints();
                        cooldown:SetPoint("TOPLEFT", self, "TOPLEFT", 4, -4); 
                        cooldown:SetPoint("BOTTOMRIGHT", self, "BOTTOMRIGHT", -4, 4); 
		            </OnLoad>
		            <OnEvent>
		                MistWeaver_OnButtonEvent(self, event, ...);
		            </OnEvent>
		        </Scripts>
		    </Button>
        </Frames>
        <Scripts>
            <OnLoad>
                MistWeaver_SetBackdrop(self);
            </OnLoad>
        </Scripts>
    </Frame>

	<Frame name="MistWeaverFrame" frameStrata="BACKGROUND" parent="UIParent" movable="true" hidden="true">
		<Size>
			<AbsDimension x="36" y="36"/>
		</Size>
		<Anchors>
			<Anchor point="CENTER"/>
		</Anchors>
		<Scripts>
			<OnLoad>
				MistWeaver_OnLoad(self);
			</OnLoad>
			<OnEvent>
	 			MistWeaver_OnEvent(self, event, ...);
	 		</OnEvent>
            <OnUpdate>
                MistWeaver_OnUpdate(self, elapsed);
            </OnUpdate>
		</Scripts>
		<Frames>
            <Frame name="MwPowerFrame">
                <Size>
                    <AbsDimension x="100" y="42"/>
                </Size>
                <Anchors>
                    <Anchor point="BOTTOMLEFT" relativeTo="MistWeaverFrame" relativePoint="TOPLEFT"/>
                </Anchors>
                <Scripts>
                    <OnMouseDown function="MistWeaver_MwPowerFrameOnMouseDown"/>
                    <OnMouseUp function="MistWeaver_MwPowerFrameOnMouseUp"/>
                </Scripts>
            </Frame>
		</Frames>
	</Frame>
</Ui>
actions.precombat=fel_domination,if=time>0&!pet.alive&!buff.grimoire_of_sacrifice.up
actions.precombat+=/summon_pet
actions.precombat+=/grimoire_of_sacrifice,if=talent.grimoire_of_sacrifice.enabled
actions.precombat+=/inquisitors_gaze
actions.precombat+=/seed_of_corruption,if=spell_targets.seed_of_corruption_aoe>3
actions.precombat+=/haunt
actions.precombat+=/unstable_affliction,if=!talent.soul_swap
actions.precombat+=/shadow_bolt

# Executed every time the actor is available.
actions+=/call_action_list,name=ogcd
actions+=/call_action_list,name=items
actions+=/call_action_list,name=cleave,strict=1,if=active_enemies>1&active_enemies<4
actions+=/call_action_list,name=aoe,strict=1,if=active_enemies>3
actions+=/malefic_rapture,if=soul_shard=5
actions+=/haunt
actions+=/soul_swap,if=dot.unstable_affliction.remains<5
actions+=/unstable_affliction,if=remains<5
actions+=/agony,if=remains<5
actions+=/siphon_life,if=remains<5
actions+=/corruption,if=remains<5
actions+=/soul_tap
actions+=/phantom_singularity
actions+=/vile_taint
actions+=/soul_rot
actions+=/summon_darkglare
actions+=/malefic_rapture,if=talent.malefic_affliction&buff.malefic_affliction.stack<3
actions+=/malefic_rapture,if=talent.dread_touch&debuff.dread_touch.remains<gcd
actions+=/malefic_rapture,if=!talent.dread_touch&buff.tormented_crescendo.up
actions+=/malefic_rapture,if=!talent.dread_touch&(dot.soul_rot.remains>cast_time|dot.phantom_singularity.remains>cast_time|dot.vile_taint.remains>cast_time|pet.darkglare.active)
actions+=/drain_soul,if=buff.nightfall.react|talent.shadow_embrace&(debuff.shadow_embrace.stack<3|debuff.shadow_embrace.remains<2)
actions+=/shadow_bolt,if=buff.nightfall.react|talent.shadow_embrace&(debuff.shadow_embrace.stack<3|debuff.shadow_embrace.remains<2)
actions+=/drain_life,if=buff.inevitable_demise.stack>48|buff.inevitable_demise.stack>20&boss&fight_remains<4
actions+=/agony,if=refreshable
actions+=/corruption,if=refreshable
actions+=/drain_soul,interrupt=1
actions+=/shadow_bolt

actions.aoe+=/haunt
actions.aoe+=/vile_taint
actions.aoe+=/phantom_singularity
actions.aoe+=/soul_rot
actions.aoe+=/seed_of_corruption,if=dot.corruption.remains<5
actions.aoe+=/agony,cycle_targets=1,if=remains<5&active_dot.agony<5
actions.aoe+=/summon_darkglare
actions.aoe+=/seed_of_corruption,if=talent.sow_the_seeds
actions.aoe+=/malefic_rapture
actions.aoe+=/drain_life,if=(buff.soul_rot.up|!talent.soul_rot)&buff.inevitable_demise.stack>10
actions.aoe+=/summon_soulkeeper,if=buff.tormented_soul.stack=10
actions.aoe+=/siphon_life,cycle_targets=1,if=remains<5&active_dot.siphon_life<3
actions.aoe+=/drain_soul,interrupt_global=1
actions.aoe+=/shadow_bolt

actions.cleave+=/malefic_rapture,if=soul_shard=5
actions.cleave+=/haunt
actions.cleave+=/soul_swap,if=dot.unstable_affliction.remains<5
actions.cleave+=/unstable_affliction,if=remains<5
actions.cleave+=/agony,if=remains<5
actions.cleave+=/agony,cycle_targets=1,if=remains<5
actions.cleave+=/siphon_life,if=remains<5
actions.cleave+=/siphon_life,cycle_targets=1,if=remains<3
actions.cleave+=/seed_of_corruption,if=!talent.absolute_corruption&dot.corruption.remains<5
actions.cleave+=/corruption,cycle_targets=1,if=remains<5&(talent.absolute_corruption|!talent.seed_of_corruption)
actions.cleave+=/phantom_singularity
actions.cleave+=/vile_taint
actions.cleave+=/soul_rot
actions.cleave+=/summon_darkglare
actions.cleave+=/malefic_rapture,if=talent.malefic_affliction&buff.malefic_affliction.stack<3
actions.cleave+=/malefic_rapture,if=talent.dread_touch&debuff.dread_touch.remains<gcd
actions.cleave+=/malefic_rapture,if=!talent.dread_touch&buff.tormented_crescendo.up
actions.cleave+=/malefic_rapture,if=!talent.dread_touch&(dot.soul_rot.remains>cast_time|dot.phantom_singularity.remains>cast_time|dot.vile_taint.remains>cast_time|pet.darkglare.active)
actions.cleave+=/drain_soul,if=buff.nightfall.react
actions.cleave+=/shadow_bolt,if=buff.nightfall.react
actions.cleave+=/drain_life,if=buff.inevitable_demise.stack>48|buff.inevitable_demise.stack>20&boss&fight_remains<4
actions.cleave+=/drain_life,if=buff.soul_rot.up&buff.inevitable_demise.stack>10
actions.cleave+=/agony,cycle_targets=1,if=refreshable
actions.cleave+=/corruption,cycle_targets=1,if=refreshable
actions.cleave+=/drain_soul,interrupt_global=1
actions.cleave+=/shadow_bolt

actions.items=use_items,if=pet.darkglare.active|dot.soul_rot.ticking|!talent.summon_darkglare&!talent.soul_rot|boss&fight_remains<21

actions.ogcd=potion,if=pet.darkglare.active|dot.soul_rot.ticking|!talent.summon_darkglare&!talent.soul_rot
actions.ogcd+=/berserking,if=pet.darkglare.active|dot.soul_rot.ticking|!talent.summon_darkglare&!talent.soul_rot
actions.ogcd+=/blood_fury,if=pet.darkglare.active|dot.soul_rot.ticking|!talent.summon_darkglare&!talent.soul_rot
actions.ogcd+=/fireblood,if=pet.darkglare.active|dot.soul_rot.ticking|!talent.summon_darkglare&!talent.soul_rot